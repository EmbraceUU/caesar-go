# 并发 - 并发的含义

## 整理

### 并发与并行

并发: 逻辑上具有同时处理多个任务的能力

并行: 物理上可以同一时刻处理多个任务

协程上运行的多个任务, 本质上还是串行的, 加上调度, 不需要进行同步处理

### 使用场景

多进程: 实现分布式和负载均衡

多线程: 抢夺更多的CPU资源

协程: 提高CPU时间片利用率

### goroutine特性

go func 不是执行, 而是创建

不会阻塞当前流程

保存函数指针 / 调用参数 / 栈内存空间 (2KB, 线程是MB级别)

goroutine 延时执行, 立即计算 + 复制参数 **[d1]()**

### Wait

单个任务, 使用channel阻塞

等待多个任务, 使用sync.WaitGroup

在 for 循环中, goroutine 外面累加计数器

**多出使用 wg.Wait(), 都能收到信号 [d2]()**

### GOMAXPROCS

默认与CPU核数相等

runtime.GOMAXPROCS() 参数 < 1, 返回设置值, 不做修改

### Local Storage

无法设置优先级

无法获取编号

没有局部存储

返回值被抛弃

优先级无法解决, 其他都好说