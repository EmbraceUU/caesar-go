## Array

### 概述

* 相同的元素
* 连续的内存
* 通过索引快速访问
* 一维或者多维
* 类型由elem和bound两个因素决定

### 初始化

指定类型和长度

```gotemplate
arr1 := [3]int{1, 2, 3}
arr2 := [...]int{1, 2, 3}
```

#### 上限推导

`arr2 := [...]int{1, 2, 3}`在编译过程中, 会推算出数组的长度, 等价于`arr1 := [3]int{1, 2, 3}`

#### 语句转换

* len < 4 时，会直接在栈上初始化
* len > 4 时，会先在静态数据区初始化，再拷贝到栈上

### 访问和赋值

* 使用常量访问数组，编译期间会检查越界错误，`a[5]对于长度为3的数组a的访问，是会报编译错误的。`
* 使用变量访问数组，编译期间发现不了。运行期间会引发panic。
* SSA阶段，当编译器无法对数组下标是否越界无法做出判断时，会加入 PanicBounds 指令交给运行时进行判断。
* 寻址和赋值操作，大多数在编译期间转换成读写内存操作。
